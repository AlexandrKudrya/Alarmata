# Iteration 2.3: Adaptive Difficulty + Enhanced Logging

**Итерация:** 2 (Умные задания)
**Срок:** 4-5 дней
**Статус:** Не начата

## Цель

Система автоматически подстраивает сложность заданий под пользователя. Расширенное логирование для аналитики.

## Задачи

### Адаптивная сложность
- [ ] `DifficultyAdapter` — алгоритм адаптации:
  - Анализ последних 10 попыток
  - Если >70% ошибок → снизить сложность
  - Если <20% ошибок и быстро решает → повысить
  - Отдельная адаптация для каждого типа задания
- [ ] Settings toggle: "Автоматическая адаптация сложности"
- [ ] Визуализация текущей сложности в настройках будильника

### Расширенное логирование
- [ ] Дополнить `AlarmLogEntity`:
  - `taskDifficulty` — уровень сложности при срабатывании
  - `timeToComplete` — время от старта до решения (ms)
  - `mistakeDetails` — JSON с деталями ошибок
- [ ] Миграция Room БД (версия 1 -> 2)

### Режим "Важный день"
- [ ] Флаг `isImportantDay` на будильнике
- [ ] При активации:
  - Принудительная Hard сложность
  - Комбинация заданий (Math + ещё одно)
  - Snooze отключён
- [ ] UI toggle в настройках будильника

### Статистика по заданиям
- [ ] Экран: какой тип проходится лучше/хуже
- [ ] Среднее время выполнения каждого типа
- [ ] Процент ошибок по типам

## Алгоритм адаптации

```
recentLogs = последние 10 попыток для данного типа задания
errorRate = среднее (mistakes / attempts)
avgTime = среднее время решения

if errorRate > 0.7:
    difficulty -= 1
elif errorRate < 0.2 AND avgTime < threshold:
    difficulty += 1
else:
    difficulty не меняется
```

## Критерии завершения

- Сложность адаптируется автоматически
- "Важный день" принудительно усложняет задания
- Детальная статистика по типам заданий
- Room миграция работает без потери данных

## Зависимости

- IT-2.2 (все типы заданий реализованы)
- MVP 1.5 (базовое логирование)
