# MVP 1.6: Quick Sleep Setup — Быстрый будильник в пару свайпов

**Итерация:** 1 (MVP)
**Срок:** 5-7 дней
**Статус:** Не начата

## Цель

Пользователь в пару касаний настраивает сон — приложение само ставит оптимальные будильники. Два режима: "разбуди через X часов" и "хочу встать в N:00 — когда лечь?"

## Задачи

### Режим 1: "Быстрый сон" (свайп-установка)

- [ ] Новый экран `QuickSleepScreen` — доступен с главного экрана (FAB или верхняя кнопка)
- [ ] Горизонтальный скроллер/слайдер для выбора длительности сна:
  - Диапазон: 4ч — 10ч с шагом 30 мин
  - Крупные цифры "7ч 30мин" по центру
  - Визуальный индикатор оптимальности (зелёный 7-9ч, жёлтый 5-7ч, красный <5ч)
- [ ] Расчёт с учётом циклов сна (~90 мин):
  - Показать "Ляжете в 23:30 → проснётесь в 7:00"
  - Подсветка: "4.5 цикла сна" / "5 циклов сна"
- [ ] Одно нажатие "Поставить" → будильник на `now + X` создан и включён
- [ ] Опционально: поставить два будильника — мягкий за 15 мин + основной
- [ ] Настраиваемое "время засыпания" (по умолчанию 15 мин)

### Режим 2: "Когда лечь?"

- [ ] Ввод желаемого времени пробуждения (TimePicker или быстрые слоты: 6:00, 6:30, 7:00, 7:30, 8:00)
- [ ] Расчёт оптимальных вариантов отбоя по циклам сна:
  - 6 циклов (9ч) → "Ложитесь в 21:45"
  - 5 циклов (7.5ч) → "Ложитесь в 23:15" (рекомендуется)
  - 4 цикла (6ч) → "Ложитесь в 00:45"
  - 3 цикла (4.5ч) → "Ложитесь в 02:15"
- [ ] Каждый вариант — карточка с:
  - Время отбоя
  - Количество часов сна
  - Бейдж рекомендации (оптимально / нормально / мало)
- [ ] Нажатие на карточку → будильник создаётся
- [ ] Опционально: напоминание "Пора ложиться" за 15 мин до выбранного времени

### Sleep Cycle Engine

- [ ] `SleepCycleCalculator` в `core/sleep/`:
  ```kotlin
  object SleepCycleCalculator {
      const val CYCLE_MINUTES = 90
      const val DEFAULT_FALL_ASLEEP_MINUTES = 15

      fun calculateWakeTime(bedtime: LocalTime, cycles: Int): LocalTime
      fun calculateBedtimes(wakeTime: LocalTime): List<SleepOption>
      fun calculateWakeTimes(bedtime: LocalTime): List<SleepOption>
      fun optimalCycleCount(availableMinutes: Int): Int
  }

  data class SleepOption(
      val time: LocalTime,
      val cycles: Int,
      val totalSleepMinutes: Int,
      val quality: SleepQuality // OPTIMAL, GOOD, SHORT, MINIMAL
  )
  ```

### Навигация

- [ ] Кнопка на главном экране будильников (иконка луны или "Quick Sleep")
- [ ] Добавить в bottom navigation или как FAB-действие
- [ ] После создания будильника → возврат на главный экран с подтверждением

## UI/UX

- Экран "Быстрый сон" должен быть тёмным (ночной режим) — пользователь открывает перед сном
- Минимум текста, максимум визуала
- Один палец, одна рука — все действия доступны свайпами/тапами
- Анимация луны/звёзд (subtle, не отвлекает)

## Критерии завершения

- Из режима "Быстрый сон" будильник ставится в 2 касания
- Из режима "Когда лечь?" — расчёт корректный, будильник создаётся
- Циклы сна рассчитываются правильно (кратно 90 мин)
- UX интуитивный — не нужна инструкция

## Зависимости

- MVP 1.3 (AlarmScheduler, alarm scheduling)
- MVP 1.2 (Alarm CRUD)

## Риски

- Расчёт циклов приблизительный (90 мин — среднее, реальные циклы варьируются)
- Время засыпания индивидуально — дать настройку
